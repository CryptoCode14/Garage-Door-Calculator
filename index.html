<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commercial Quote Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .form-section { border: 1px solid #E5E7EB; border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem; background-color: white;}
        .form-section-title { font-size: 1.125rem; font-weight: 600; color: #1F2937; margin-bottom: 1rem; display: flex; align-items: center; }
        .preview-section { margin-bottom: 1.25rem; }
        .preview-section h4 { font-weight: 600; color: #374151; margin-bottom: 0.75rem; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em;}
        .preview-item { display: flex; justify-content: space-between; font-size: 0.875rem; color: #4B5563; padding: 0.35rem 0; }
        .preview-item .label { color: #4B5563; }
        .preview-item .value { font-weight: 500; color: #1F2937; text-align: right; }
        .preview-item.total { font-weight: 700; color: #1F2937; font-size: 1.125rem; border-top: 1px solid #D1D5DB; padding-top: 0.75rem; margin-top:0.75rem;}
        .input-field { appearance: none; border: 1px solid #D1D5DB; border-radius: 0.375rem; padding: 0.5rem 0.75rem; font-size: 0.875rem; width: 100%; transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
        .input-field:focus { border-color: #2563EB; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.25); outline: none; }
        .input-label { display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.25rem; }
        .btn { padding: 0.625rem 1.25rem; border-radius: 0.375rem; font-weight: 500; font-size: 0.875rem; transition: background-color 0.2s ease-in-out; display: inline-flex; align-items: center; justify-content: center; }
        .btn-primary { background-color: #2563EB; color: white; }
        .btn-primary:hover { background-color: #1D4ED8; }
        .btn-secondary { background-color: #E5E7EB; color: #374151; border: 1px solid #D1D5DB;}
        .btn-secondary:hover { background-color: #D1D5DB; }
        .output-display { font-size: 0.875rem; font-weight: 500; color: #1F2937; background-color: #F3F4F6; padding: 0.5rem 0.75rem; border-radius: 0.375rem; text-align: right; min-height: 38px; display: flex; align-items: center; justify-content: flex-end;}
        .lucide { width: 1em; height: 1em; vertical-align: -0.125em; display: inline-block; }
        .sidebar-value-highlight { color: #10B981; }
        .sidebar-value-negative { color: #EF4444; }
        input[type="range"] { -webkit-appearance: none; appearance: none; width: 100%; height: 8px; background: #D1D5DB; border-radius: 5px; outline: none; opacity: 0.7; transition: opacity .2s; margin-top: 0.5rem;}
        input[type="range"]:hover { opacity: 1; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: #2563EB; border-radius: 50%; cursor: pointer; }
        input[type="range"]::-moz-range-thumb { width: 20px; height: 20px; background: #2563EB; border-radius: 50%; cursor: pointer; border: none; }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
            <div class="flex justify-between items-center py-4">
                <h1 class="text-xl font-semibold text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calculator inline-block mr-2"><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
                    Commercial Quote Calculator
                </h1>
                <button id="newQuoteBtn" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus mr-2"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                    New Quote
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-7xl">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column: Quote Calculator -->
            <div class="lg:col-span-2 space-y-6">
                <p class="text-sm text-gray-600">Enter project details to generate a professional quote.</p>

                <form id="quoteForm">
                    <!-- Client Information -->
                    <section class="form-section">
                        <h3 class="form-section-title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user-round mr-2"><circle cx="12" cy="8" r="5"/><path d="M20 21a8 8 0 0 0-16 0"/></svg>
                            Client Information
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="clientName" class="input-label">Client Name</label>
                                <input type="text" id="clientName" name="clientName" class="input-field" placeholder="Enter client name">
                            </div>
                            <div>
                                <label for="projectName" class="input-label">Project Name</label>
                                <input type="text" id="projectName" name="projectName" class="input-field" placeholder="Enter project name">
                            </div>
                        </div>
                    </section>

                    <!-- Materials & Services -->
                    <section class="form-section">
                        <h3 class="form-section-title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-box mr-2"><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>
                            Materials & Services
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="materialCost" class="input-label">Material Costs (Actual) ($)</label>
                                <input type="number" id="materialCost" name="materialCost" class="input-field" placeholder="0.00" step="0.01">
                            </div>
                            <div>
                                <label for="serviceCost" class="input-label">Service Costs ($)</label>
                                <input type="number" id="serviceCost" name="serviceCost" class="input-field" placeholder="0.00" step="0.01">
                            </div>
                        </div>
                    </section>

                    <!-- Labor (Inputs remain, but not used for price setting) -->
                    <section class="form-section">
                        <h3 class="form-section-title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-person-standing mr-2"><circle cx="12" cy="5" r="1"/><path d="m9 20 3-6 3 6"/><path d="m6 8 6 2 6-2"/><path d="M12 10v4"/></svg>
                            Labor (Affects Net Profit, Not Selling Price)
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
                            <div>
                                <label for="laborHours" class="input-label">Labor Hours</label>
                                <input type="number" id="laborHours" name="laborHours" class="input-field" placeholder="0" step="0.1">
                            </div>
                            <div>
                                <label for="laborRate" class="input-label">Labor Rate (per hour) ($)</label>
                                <input type="number" id="laborRate" name="laborRate" class="input-field" placeholder="0.00" step="0.01">
                            </div>
                            <div>
                                <label class="input-label">Total Labor Cost ($)</label>
                                <div id="totalLaborCostDisplay" class="output-display">0.00</div>
                            </div>
                        </div>
                    </section>

                    <!-- Business Calculations & Pricing Strategy -->
                    <section class="form-section">
                        <h3 class="form-section-title">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sliders-horizontal mr-2"><line x1="21" x2="14" y1="4" y2="4"/><line x1="10" x2="3" y1="4" y2="4"/><line x1="21" x2="12" y1="12" y2="12"/><line x1="8" x2="3" y1="12" y2="12"/><line x1="21" x2="16" y1="20" y2="20"/><line x1="12" x2="3" y1="20" y2="20"/><line x1="14" x2="14" y1="2" y2="6"/><line x1="8" x2="8" y1="10" y2="14"/><line x1="16" x2="16" y1="18" y2="22"/></svg>
                            Business Calculations & Pricing
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 items-start">
                            <div>
                                <label for="dayPercentage" class="input-label">Day Percentage (%)</label>
                                <input type="number" id="dayPercentage" name="dayPercentage" class="input-field" placeholder="0" step="0.01">
                                <p class="text-xs text-gray-500 mt-1">Percentage of day (vs. $2,000 base OpEx)</p>
                            </div>
                            <div>
                                <label for="installationCost" class="input-label">Installation Cost ($)</label>
                                <input type="number" id="installationCost" name="installationCost" class="input-field" placeholder="0.00" step="0.01">
                            </div>
                            <div>
                                <label for="quoteOperatingExpenses" class="input-label">Additional OpEx for Quote ($)</label>
                                <input type="number" id="quoteOperatingExpenses" name="quoteOperatingExpenses" class="input-field" placeholder="0.00" step="0.01">
                            </div>
                             <div>
                                <label class="input-label">Double Material Costs (Actual) ($)</label>
                                <div id="doubleMaterialCostDisplay" class="output-display">0.00</div>
                            </div>
                            <div class="md:col-span-2 mt-2">
                                <label for="profitabilitySlider" class="input-label">Target Markup on Pricing Costs: <span id="profitabilitySliderValue" class="font-semibold text-blue-600">50</span>%</label>
                                <input type="range" id="profitabilitySlider" name="profitabilitySlider" min="0" max="200" value="50" class="w-full">
                                <p class="text-xs text-gray-500 mt-1">This markup is applied to (Marked-up Materials + Services + Installation + OpEx) to set the selling price. Labor is excluded from this price setting base.</p>
                            </div>
                        </div>
                    </section>

                    <!-- Action Buttons -->
                    <div class="flex flex-col sm:flex-row gap-3 mt-8">
                        <button type="button" id="saveQuoteBtn" class="btn btn-secondary w-full sm:w-auto">
                             <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save mr-2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                            Save Quote (Placeholder)
                        </button>
                        <button type="reset" id="resetBtn" class="btn btn-secondary w-full sm:w-auto">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rotate-ccw mr-2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                            Reset
                        </button>
                    </div>
                </form>
            </div>

            <!-- Right Column: Quote Preview -->
            <div class="lg:col-span-1">
                <div class="sticky top-8 bg-white p-6 rounded-lg shadow-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-lg font-semibold text-gray-800">Quote Preview</h2>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-printer text-gray-400"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect width="12" height="8" x="6" y="14"/></svg>
                    </div>

                    <div class="preview-section">
                        <div class="preview-item"><span class="label">Quote #:</span> <span id="preview_quoteId" class="value">QT-GEM-001</span></div>
                        <div class="preview-item"><span class="label">Date:</span> <span id="preview_date" class="value"></span></div>
                        <hr class="my-2">
                        <div class="preview-item"><span class="label">Client:</span> <span id="preview_clientName" class="value">N/A</span></div>
                        <div class="preview-item"><span class="label">Project:</span> <span id="preview_projectName" class="value">N/A</span></div>
                    </div>

                    <div class="preview-section">
                        <div class="preview-item"><span class="label">Materials (actual cost)</span> <span id="preview_materialCost" class="value">$0.00</span></div>
                        <div class="preview-item"><span class="label">+ Material Markup (<span id="preview_materialMarkupPercentage">50</span>%)</span> <span id="preview_materialMarkupValue" class="value">$0.00</span></div>
                        <div class="preview-item font-medium"><span class="label">Materials (marked up for pricing)</span> <span id="preview_materialCostMarkedUp" class="value">$0.00</span></div>
                        <div class="preview-item"><span class="label">Services</span> <span id="preview_serviceCost" class="value">$0.00</span></div>
                        <div class="preview-item"><span class="label">Labor (for profit calc) (<span id="preview_laborHours">0.0</span> hrs @ $<span id="preview_laborRate">0.00</span>/hr)</span> <span id="preview_totalLabor" class="value">$0.00</span></div>
                        <div class="preview-item"><span class="label">Installation</span> <span id="preview_installationCost" class="value">$0.00</span></div>
                        <div class="preview-item total"><span class="label">Selling Price</span> <span id="preview_grandTotal" class="value">$0.00</span></div>
                    </div>

                    <div class="preview-section">
                        <h4 class="border-t pt-3">Business Analysis</h4>
                        <div class="preview-item"><span class="label">Target Markup on Pricing Costs</span> <span id="preview_targetMarkupPercentage" class="value">0.0%</span></div>
                        <div class="preview-item"><span class="label">Day Percentage</span> <span id="preview_dayPercentage" class="value">0.0%</span></div>
                        <div class="preview-item"><span class="label">Operating Expenses (Quote Specific)</span> <span id="preview_quoteOperatingExpenses" class="value">$0.00</span></div>
                        <div class="preview-item"><span class="label">Double Material Cost (Actual)</span> <span id="preview_doubleMaterialCost" class="value">$0.00</span></div>
                        <div class="preview-item"><span class="label">Net Profit Margin (on Revenue)</span> <span id="preview_profitPercentage" class="value">0.0%</span></div>
                    </div>

                    <div class="preview-section">
                        <h4 class="border-t pt-3">Profit Breakdown</h4>
                        <div class="preview-item"><span class="label">Selling Price</span> <span id="preview_profit_totalRevenue" class="value">$0.00</span></div>
                        <div class="preview-item"><span class="label">- Operating Expenses (Day % of Base)</span> <span id="preview_profit_operatingExpenses" class="value sidebar-value-negative">-$0.00</span></div>
                        <div class="preview-item"><span class="label">- Material Costs (actual)</span> <span id="preview_profit_materialCosts" class="value sidebar-value-negative">-$0.00</span></div>
                        <div class="preview-item"><span class="label">- Labor Costs</span> <span id="preview_profit_laborCosts" class="value sidebar-value-negative">-$0.00</span></div>
                        <div class="preview-item"><span class="label">- Service Costs</span> <span id="preview_profit_serviceCosts" class="value sidebar-value-negative">-$0.00</span></div>
                        <div class="preview-item"><span class="label">- Installation Costs</span> <span id="preview_profit_installationCosts" class="value sidebar-value-negative">-$0.00</span></div>
                        <div class="preview-item"><span class="label">- Quote Specific OpEx</span> <span id="preview_profit_quoteSpecificOpEx" class="value sidebar-value-negative">-$0.00</span></div>
                        <div class="preview-item total"><span class="label">Net Profit</span> <span id="preview_netProfit" class="value sidebar-value-highlight">$0.00</span></div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Link to your external script.js file -->
    <script src="script.js"></script> 
</body>
</html>
